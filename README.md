# Multi-View Point Cloud Reconstruction Toolkit

A toolkit for capturing and visualizing multi-view images from 3D point clouds for reconstruction tasks.

## Overview

This toolkit provides tools for:

1. Loading and processing point cloud data (PLY files)
2. Capturing synthetic multi-view images from different camera positions
3. Visualizing point clouds and camera positions
4. Exporting camera parameters for 3D reconstruction algorithms

## Components

The toolkit consists of three main modules:

### 1. Point Cloud Utilities (`point_cloud_utils.py`)

Core functionality for point cloud processing, including:
- Loading and preprocessing point clouds
- Computing normals for better visualization
- Determining optimal camera positions
- Calculating camera parameters (extrinsic matrices)

### 2. Virtual Camera Capture (`virtual_camera_capture.py`)

Captures synthetic images of a point cloud from multiple viewpoints:
- Renders the point cloud from different camera positions
- Saves images with corresponding camera parameters
- Exports camera intrinsic and extrinsic matrices

### 3. Point Cloud Visualizer (`point_cloud_visualizer.py`)

Visualizes point clouds and camera positions:
- Interactive 3D visualization using Open3D
- 2D and 3D plots of camera positions with matplotlib
- Visual representation of camera frustums and paths

## Requirements

- Python 3.6+
- Open3D
- NumPy
- OpenCV
- Matplotlib

## Usage

### Capturing Multi-View Images

```bash
python virtual_camera_capture.py path/to/your_model.ply --output output_dir --views 30 --resolution 1280x720
```

Options:
- `--output, -o`: Output directory for captured data (default: timestamped folder)
- `--views, -v`: Number of views to capture (default: 20)
- `--resolution, -r`: Camera resolution in WIDTH×HEIGHT format (default: 1280×720)
- `--no-preview`: Skip the point cloud preview

### Visualizing Point Cloud and Camera Positions

```bash
python point_cloud_visualizer.py --ply path/to/your_model.ply --cameras path/to/camera_parameters.json --mode 3d
```

Options:
- `--ply`: Path to the input PLY file
- `--cameras`: Path to camera parameters JSON file (generated by virtual_camera_capture.py)
- `--mode`: Visualization mode (3d, 2d, or open3d)

## Output Format

The virtual camera capture generates:
- Images in the `images/` subdirectory
- A `camera_parameters.json` file containing:
  - Intrinsic camera matrix
  - Distortion coefficients (zero for virtual cameras)
  - Resolution
  - List of views with extrinsic matrices and camera positions
  - Point cloud information (center, extent, radius)

## Example Workflow

1. Capture multi-view images:
   ```bash
   python virtual_camera_capture.py model.ply --views 30
   ```

2. Visualize the camera positions:
   ```bash
   python point_cloud_visualizer.py --cameras virtual_capture_20231010_123456/camera_parameters.json --mode 3d
   ```

3. Use the captured images and camera parameters with your 3D reconstruction algorithm.

## Notes

- For best results, point clouds should have normal vectors. If not present, they will be computed automatically.
- Camera positions are arranged in a hemisphere pattern around the object for optimal coverage.
- The visualization uses different color gradients to indicate the sequence of camera positions. 